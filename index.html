<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Game Configuration - X-FREE FGP</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }
    .card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
    .product-item {
      transition: all 0.2s ease;
    }
    .product-item:hover {
      background: rgba(255, 255, 255, 0.08);
    }
    input, textarea {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }
    input:focus, textarea:focus {
      background: rgba(0, 0, 0, 0.5);
      border-color: #667eea;
      outline: none;
    }
    .tab-btn {
      transition: all 0.3s ease;
    }
    .tab-btn.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
  </style>
</head>
<body class="min-h-screen text-white p-6">
  
  <!-- Header -->
  <div class="max-w-7xl mx-auto mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-4xl font-bold mb-2">Game Configuration</h1>
        <p class="text-gray-400">Manage webhooks, products, and game passes</p>
      </div>
      <div class="flex gap-3">
        <button onclick="showTutorial()" class="px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-semibold transition">
          üìñ Tutorial
        </button>
        <button onclick="exportConfig()" class="px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition">
          üì• Export Config
        </button>
        <button onclick="importConfig()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition">
          üì§ Import Config
        </button>
      </div>
    </div>
  </div>

  <!-- Tabs -->
  <div class="max-w-7xl mx-auto mb-6">
    <div class="flex gap-2 overflow-x-auto">
      <button onclick="switchTab('webhooks')" class="tab-btn active px-6 py-3 rounded-lg font-semibold whitespace-nowrap" id="tab-webhooks">
        üîó Webhooks
      </button>
      <button onclick="switchTab('settings')" class="tab-btn px-6 py-3 rounded-lg font-semibold whitespace-nowrap" id="tab-settings">
        ‚öôÔ∏è Settings
      </button>
      <button onclick="switchTab('products')" class="tab-btn px-6 py-3 rounded-lg font-semibold whitespace-nowrap" id="tab-products">
        üõí Products
      </button>
      <button onclick="switchTab('gamepasses')" class="tab-btn px-6 py-3 rounded-lg font-semibold whitespace-nowrap" id="tab-gamepasses">
        üéÆ Game Passes
      </button>
      <button onclick="switchTab('colors')" class="tab-btn px-6 py-3 rounded-lg font-semibold whitespace-nowrap" id="tab-colors">
        üé® Colors
      </button>
    </div>
  </div>

  <!-- Content Sections -->
  <div class="max-w-7xl mx-auto">
    
    <!-- Webhooks Section -->
    <div id="section-webhooks" class="space-y-6">
      <div class="card p-6 rounded-2xl">
        <h2 class="text-2xl font-bold mb-4">Discord Webhooks</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Visit Webhook URL</label>
            <input type="url" id="webhook-visit" placeholder="https://discord.com/api/webhooks/..." 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Purchase Webhook URL</label>
            <input type="url" id="webhook-purchase" placeholder="https://discord.com/api/webhooks/..." 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Section -->
    <div id="section-settings" class="space-y-6 hidden">
      <div class="card p-6 rounded-2xl">
        <h2 class="text-2xl font-bold mb-4">Webhook Settings</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Bot Username</label>
            <input type="text" id="setting-username" placeholder="X-FREE FGP" 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Avatar URL</label>
            <input type="url" id="setting-avatar" placeholder="https://..." 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Footer Text</label>
            <input type="text" id="setting-footer-text" placeholder="Powered BY: X-FREE FGP" 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Footer Icon URL</label>
            <input type="url" id="setting-footer-icon" placeholder="https://..." 
                   class="w-full px-4 py-3 rounded-lg text-white" />
          </div>
        </div>
      </div>
    </div>

    <!-- Products Section -->
    <div id="section-products" class="space-y-6 hidden">
      <div class="card p-6 rounded-2xl">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold">Developer Products</h2>
          <button onclick="addProduct()" class="px-4 py-2 btn-primary rounded-lg font-semibold">
            + Add Product
          </button>
        </div>
        <div id="products-list" class="space-y-3">
          <!-- Products will be added here -->
        </div>
      </div>
    </div>

    <!-- Game Passes Section -->
    <div id="section-gamepasses" class="space-y-6 hidden">
      <div class="card p-6 rounded-2xl">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold">Game Passes</h2>
          <button onclick="addGamePass()" class="px-4 py-2 btn-primary rounded-lg font-semibold">
            + Add Game Pass
          </button>
        </div>
        <div id="gamepasses-list" class="space-y-3">
          <!-- Game passes will be added here -->
        </div>
      </div>
    </div>

    <!-- Colors Section -->
    <div id="section-colors" class="space-y-6 hidden">
      <div class="card p-6 rounded-2xl">
        <h2 class="text-2xl font-bold mb-4">Embed Colors</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-2">Visit Color (Hex)</label>
            <div class="flex gap-3">
              <input type="color" id="color-visit-picker" class="w-16 h-12 rounded cursor-pointer" />
              <input type="text" id="color-visit" placeholder="0xFFC361" 
                     class="flex-1 px-4 py-3 rounded-lg text-white" />
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium mb-2">Purchase Color (Hex)</label>
            <div class="flex gap-3">
              <input type="color" id="color-purchase-picker" class="w-16 h-12 rounded cursor-pointer" />
              <input type="text" id="color-purchase" placeholder="0x00FF00" 
                     class="flex-1 px-4 py-3 rounded-lg text-white" />
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Tutorial Modal -->
  <div id="tutorial-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center z-50 p-6" style="display: none;">
    <div class="bg-[#202020] rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-700">
      <div class="sticky top-0 bg-[#202020] p-6 border-b border-gray-700 flex justify-between items-center">
        <h2 class="text-3xl font-bold">üìñ Implementation Tutorial</h2>
        <button onclick="closeTutorial()" class="text-4xl hover:text-red-500 transition">&times;</button>
      </div>
      
      <div class="p-6 space-y-8">
        
        <!-- Step 1 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">1</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Create Discord Webhooks</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Open your Discord server</li>
                <li>Go to <strong>Server Settings</strong> ‚Üí <strong>Integrations</strong> ‚Üí <strong>Webhooks</strong></li>
                <li>Click <strong>"New Webhook"</strong></li>
                <li>Create two webhooks:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><strong>"Visit Webhook"</strong> - for player join notifications</li>
                    <li><strong>"Purchase Webhook"</strong> - for purchase notifications</li>
                  </ul>
                </li>
                <li>Copy both webhook URLs</li>
                <li>Paste them in the <strong>üîó Webhooks</strong> tab of this dashboard</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">2</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Configure Settings</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Go to the <strong>‚öôÔ∏è Settings</strong> tab</li>
                <li>Customize your webhook bot appearance:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><strong>Bot Username</strong> - Display name for webhooks</li>
                    <li><strong>Avatar URL</strong> - Profile picture for the bot</li>
                    <li><strong>Footer Text</strong> - Text at bottom of embeds</li>
                    <li><strong>Footer Icon URL</strong> - Small icon in footer</li>
                  </ul>
                </li>
                <li>All changes auto-save!</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Step 3 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">3</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Add Your Products</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Go to the <strong>üõí Products</strong> tab</li>
                <li>Click <strong>"+ Add Product"</strong></li>
                <li>Enter:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><strong>Product Name</strong> - Display name (e.g., "Esok Sekolah")</li>
                    <li><strong>Product ID</strong> - Your Roblox developer product ID</li>
                    <li><strong>Action Text</strong> - Button text (e.g., "Buy for 30R$")</li>
                  </ul>
                </li>
                <li>Repeat for all your products</li>
                <li>To delete, click the red <strong>"Delete"</strong> button</li>
              </ol>
              <div class="mt-4 p-4 bg-blue-900 bg-opacity-30 rounded-lg border border-blue-500">
                <p class="text-sm"><strong>üí° Tip:</strong> To find your Product ID, go to Roblox Creator Dashboard ‚Üí Your Game ‚Üí Monetization ‚Üí Developer Products</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 4 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">4</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Add Game Passes</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Go to the <strong>üéÆ Game Passes</strong> tab</li>
                <li>Click <strong>"+ Add Game Pass"</strong></li>
                <li>Enter:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><strong>Game Pass Name</strong> - Display name (e.g., "VIP")</li>
                    <li><strong>Game Pass ID</strong> - Your Roblox game pass ID</li>
                  </ul>
                </li>
                <li>Repeat for all your game passes</li>
              </ol>
              <div class="mt-4 p-4 bg-blue-900 bg-opacity-30 rounded-lg border border-blue-500">
                <p class="text-sm"><strong>üí° Tip:</strong> Find Game Pass IDs in Creator Dashboard ‚Üí Your Game ‚Üí Monetization ‚Üí Passes</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 5 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-purple-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">5</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Customize Colors</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Go to the <strong>üé® Colors</strong> tab</li>
                <li>Use the color pickers to select:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><strong>Visit Color</strong> - Embed color for player joins (default: Orange)</li>
                    <li><strong>Purchase Color</strong> - Embed color for purchases (default: Green)</li>
                  </ul>
                </li>
                <li>Colors are shown in Discord embeds</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Step 6 -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-green-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">6</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Export Configuration</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li>Click the <strong>"üì• Export Config"</strong> button at the top</li>
                <li>Three files will download automatically:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li><code class="bg-black px-2 py-1 rounded">Configure.lua</code></li>
                    <li><code class="bg-black px-2 py-1 rounded">ProductData.lua</code></li>
                    <li><code class="bg-black px-2 py-1 rounded">GamePassData.lua</code></li>
                  </ul>
                </li>
                <li>Check your Downloads folder</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Step 7 -->
        <div class="card p-6 rounded-xl bg-gradient-to-r from-purple-900 to-blue-900">
          <div class="flex items-start gap-4">
            <div class="bg-white text-purple-900 rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">7</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Upload to Roblox Studio</h3>
              <ol class="space-y-3 text-gray-200 list-decimal list-inside">
                <li>Open <strong>Roblox Studio</strong> and your game</li>
                <li>Enable <strong>HTTP Requests</strong>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Go to <strong>Home</strong> ‚Üí <strong>Game Settings</strong></li>
                    <li>Click <strong>Security</strong> tab</li>
                    <li>Enable <strong>"Allow HTTP Requests"</strong></li>
                  </ul>
                </li>
                <li class="mt-3">Upload <code class="bg-black bg-opacity-50 px-2 py-1 rounded">Configure.lua</code>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Right-click <strong>ServerScriptService</strong></li>
                    <li>Insert the script and name it <strong>"Configure"</strong></li>
                    <li>Paste the content from the downloaded file</li>
                  </ul>
                </li>
                <li class="mt-3">Upload <code class="bg-black bg-opacity-50 px-2 py-1 rounded">ProductData.lua</code>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Navigate to <strong>ServerScriptService ‚Üí X-FREE ‚Üí ConfigFGP</strong></li>
                    <li>Find or create <strong>"ProductData"</strong> module</li>
                    <li>Replace with the downloaded file content</li>
                  </ul>
                </li>
                <li class="mt-3">Upload <code class="bg-black bg-opacity-50 px-2 py-1 rounded">GamePassData.lua</code>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Navigate to <strong>ReplicatedStorage</strong></li>
                    <li>Find or create <strong>"GamePassData"</strong> module</li>
                    <li>Replace with the downloaded file content</li>
                  </ul>
                </li>
                <li class="mt-3"><strong>Save</strong> and <strong>Publish</strong> your game!</li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Folder Structure -->
        <div class="card p-6 rounded-xl bg-gray-900">
          <h3 class="text-2xl font-bold mb-4">üìÅ Required Folder Structure</h3>
          <pre class="bg-black p-4 rounded-lg text-sm text-green-400 overflow-x-auto"><code>üéÆ Your Game
‚îú‚îÄ‚îÄ üìÇ ServerScriptService
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Configure (ModuleScript)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ WebhookHandler (Script) - Your existing webhook script
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ X-FREE
‚îÇ       ‚îî‚îÄ‚îÄ üìÇ ConfigFGP
‚îÇ           ‚îî‚îÄ‚îÄ üìÑ ProductData (ModuleScript)
‚îÇ
‚îú‚îÄ‚îÄ üìÇ ReplicatedStorage
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ GamePassData (ModuleScript)
‚îÇ
‚îî‚îÄ‚îÄ üìÇ Workspace
    ‚îî‚îÄ‚îÄ üìÇ Pets (Your product proximity prompts)</code></pre>
        </div>

        <!-- Testing -->
        <div class="card p-6 rounded-xl">
          <div class="flex items-start gap-4">
            <div class="bg-yellow-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl flex-shrink-0">8</div>
            <div class="flex-1">
              <h3 class="text-2xl font-bold mb-3">Test Your Setup</h3>
              <ol class="space-y-2 text-gray-300 list-decimal list-inside">
                <li><strong>Test Player Join</strong>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Play your game in Studio or publish it</li>
                    <li>Check your Discord "Visit Webhook" channel</li>
                    <li>You should see a join notification</li>
                  </ul>
                </li>
                <li class="mt-3"><strong>Test Purchases</strong>:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>Make a test purchase in-game</li>
                    <li>Check your "Purchase Webhook" channel</li>
                    <li>You should see purchase details</li>
                  </ul>
                </li>
                <li class="mt-3">If webhooks don't work, check:
                  <ul class="ml-6 mt-2 space-y-1 list-disc list-inside">
                    <li>HTTP Requests are enabled in Game Settings</li>
                    <li>Webhook URLs are correct (no typos)</li>
                    <li>Studio Output for error messages</li>
                  </ul>
                </li>
              </ol>
            </div>
          </div>
        </div>

        <!-- Tips -->
        <div class="card p-6 rounded-xl bg-gradient-to-r from-green-900 to-teal-900">
          <h3 class="text-2xl font-bold mb-4">üí° Pro Tips</h3>
          <ul class="space-y-2 text-gray-200 list-disc list-inside">
            <li>Your configuration is saved in your browser - you can come back anytime to edit</li>
            <li>Re-export after making changes and re-upload to Roblox Studio</li>
            <li>Keep webhook URLs private - don't share them publicly</li>
            <li>Test webhooks in a private Discord server first</li>
            <li>Bookmark this page for easy access</li>
            <li>You can have different configurations for different games</li>
          </ul>
        </div>

        <!-- Need Help -->
        <div class="card p-6 rounded-xl bg-red-900 bg-opacity-30 border border-red-500">
          <h3 class="text-2xl font-bold mb-3">üÜò Need Help?</h3>
          <p class="text-gray-300 mb-4">If you encounter issues:</p>
          <ul class="space-y-2 text-gray-300 list-disc list-inside">
            <li>Check the <strong>Output</strong> window in Roblox Studio for errors</li>
            <li>Verify all module scripts are in the correct locations</li>
            <li>Make sure HTTP Requests are enabled in Game Settings</li>
            <li>Test webhook URLs in a webhook testing tool first</li>
            <li>Check that Product IDs and Game Pass IDs are correct</li>
          </ul>
        </div>

      </div>

      <div class="sticky bottom-0 bg-[#202020] p-6 border-t border-gray-700">
        <button onclick="closeTutorial()" class="w-full py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-bold text-lg">
          Got it! Close Tutorial
        </button>
      </div>
    </div>
  </div>

  <script>
    // Data storage
    let config = {
      webhooks: {
        visit: '',
        purchase: ''
      },
      settings: {
        username: 'X-FREE FGP',
        avatarUrl: '',
        footerText: 'Powered BY: X-FREE FGP',
        footerIconUrl: ''
      },
      products: {},
      gamepasses: {},
      colors: {
        visit: '0xFFC361',
        purchase: '0x00FF00'
      }
    };

    // Initialize
    window.onload = function() {
      loadFromStorage();
      renderProducts();
      renderGamePasses();
      updateColorPickers();
    };

    // Tab switching
    function switchTab(tab) {
      const tabs = ['webhooks', 'settings', 'products', 'gamepasses', 'colors'];
      tabs.forEach(t => {
        document.getElementById(`section-${t}`).classList.add('hidden');
        document.getElementById(`tab-${t}`).classList.remove('active');
      });
      document.getElementById(`section-${tab}`).classList.remove('hidden');
      document.getElementById(`tab-${tab}`).classList.add('active');
    }

    // Product management
    function addProduct() {
      const name = prompt('Enter product name:');
      if (!name) return;
      const id = prompt('Enter product ID:');
      if (!id) return;
      const price = prompt('Enter action text (e.g., "Buy for 30R$"):');
      
      config.products[name] = {
        id: parseInt(id),
        actionText: price || ''
      };
      saveToStorage();
      renderProducts();
    }

    function removeProduct(name) {
      if (confirm(`Remove product "${name}"?`)) {
        delete config.products[name];
        saveToStorage();
        renderProducts();
      }
    }

    function renderProducts() {
      const list = document.getElementById('products-list');
      list.innerHTML = '';
      
      if (Object.keys(config.products).length === 0) {
        list.innerHTML = '<p class="text-gray-400 text-center py-8">No products added yet</p>';
        return;
      }

      for (const [name, data] of Object.entries(config.products)) {
        const div = document.createElement('div');
        div.className = 'product-item p-4 rounded-lg flex justify-between items-center';
        div.innerHTML = `
          <div>
            <p class="font-semibold">${name}</p>
            <p class="text-sm text-gray-400">ID: ${data.id} ‚Ä¢ ${data.actionText}</p>
          </div>
          <button onclick="removeProduct('${name}')" class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">
            Delete
          </button>
        `;
        list.appendChild(div);
      }
    }

    // Game pass management
    function addGamePass() {
      const name = prompt('Enter game pass name:');
      if (!name) return;
      const id = prompt('Enter game pass ID:');
      if (!id) return;
      
      config.gamepasses[name] = parseInt(id);
      saveToStorage();
      renderGamePasses();
    }

    function removeGamePass(name) {
      if (confirm(`Remove game pass "${name}"?`)) {
        delete config.gamepasses[name];
        saveToStorage();
        renderGamePasses();
      }
    }

    function renderGamePasses() {
      const list = document.getElementById('gamepasses-list');
      list.innerHTML = '';
      
      if (Object.keys(config.gamepasses).length === 0) {
        list.innerHTML = '<p class="text-gray-400 text-center py-8">No game passes added yet</p>';
        return;
      }

      for (const [name, id] of Object.entries(config.gamepasses)) {
        const div = document.createElement('div');
        div.className = 'product-item p-4 rounded-lg flex justify-between items-center';
        div.innerHTML = `
          <div>
            <p class="font-semibold">${name}</p>
            <p class="text-sm text-gray-400">ID: ${id}</p>
          </div>
          <button onclick="removeGamePass('${name}')" class="px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm">
            Delete
          </button>
        `;
        list.appendChild(div);
      }
    }

    // Color management
    function updateColorPickers() {
      const visitHex = config.colors.visit.replace('0x', '#');
      const purchaseHex = config.colors.purchase.replace('0x', '#');
      
      document.getElementById('color-visit-picker').value = visitHex;
      document.getElementById('color-purchase-picker').value = purchaseHex;
      document.getElementById('color-visit').value = config.colors.visit;
      document.getElementById('color-purchase').value = config.colors.purchase;
    }

    document.getElementById('color-visit-picker').addEventListener('input', (e) => {
      const hex = '0x' + e.target.value.substring(1).toUpperCase();
      document.getElementById('color-visit').value = hex;
      config.colors.visit = hex;
      saveToStorage();
    });

    document.getElementById('color-purchase-picker').addEventListener('input', (e) => {
      const hex = '0x' + e.target.value.substring(1).toUpperCase();
      document.getElementById('color-purchase').value = hex;
      config.colors.purchase = hex;
      saveToStorage();
    });

    // Auto-save inputs
    ['webhook-visit', 'webhook-purchase', 'setting-username', 'setting-avatar', 
     'setting-footer-text', 'setting-footer-icon', 'color-visit', 'color-purchase'].forEach(id => {
      const el = document.getElementById(id);
      if (el) {
        el.addEventListener('input', () => {
          saveFromInputs();
        });
      }
    });

    function saveFromInputs() {
      config.webhooks.visit = document.getElementById('webhook-visit').value;
      config.webhooks.purchase = document.getElementById('webhook-purchase').value;
      config.settings.username = document.getElementById('setting-username').value;
      config.settings.avatarUrl = document.getElementById('setting-avatar').value;
      config.settings.footerText = document.getElementById('setting-footer-text').value;
      config.settings.footerIconUrl = document.getElementById('setting-footer-icon').value;
      config.colors.visit = document.getElementById('color-visit').value;
      config.colors.purchase = document.getElementById('color-purchase').value;
      saveToStorage();
    }

    function saveToStorage() {
      localStorage.setItem('robloxConfig', JSON.stringify(config));
    }

    function loadFromStorage() {
      const saved = localStorage.getItem('robloxConfig');
      if (saved) {
        config = JSON.parse(saved);
      }
      
      document.getElementById('webhook-visit').value = config.webhooks.visit;
      document.getElementById('webhook-purchase').value = config.webhooks.purchase;
      document.getElementById('setting-username').value = config.settings.username;
      document.getElementById('setting-avatar').value = config.settings.avatarUrl;
      document.getElementById('setting-footer-text').value = config.settings.footerText;
      document.getElementById('setting-footer-icon').value = config.settings.footerIconUrl;
      document.getElementById('color-visit').value = config.colors.visit;
      document.getElementById('color-purchase').value = config.colors.purchase;
    }

    // Export configuration
    function exportConfig() {
      const luaConfig = `local Config = {}

-- Webhook URLs
Config.Webhooks = {
	["Visit"] = "${config.webhooks.visit}",
	["Purchase"] = "${config.webhooks.purchase}"
}

-- Webhook Settings
Config.Settings = {
	Username = "${config.settings.username}",
	AvatarUrl = "${config.settings.avatarUrl}",
	FooterText = "${config.settings.footerText}",
	FooterIconUrl = "${config.settings.footerIconUrl}"
}

-- Colors
Config.Colors = {
	Visit = ${config.colors.visit},
	Purchase = ${config.colors.purchase}
}

return Config`;

      const productLua = `local ProductData = {}

-- Define your product IDs here
ProductData.Products = {
${Object.entries(config.products).map(([name, data]) => `\t["${name}"] = ${data.id}`).join(',\n')}
}

-- Define custom ActionText for each product
ProductData.ActionText = {
${Object.entries(config.products).map(([name, data]) => `\t["${name}"] = "${data.actionText}"`).join(',\n')}
}

return ProductData`;

      const gamePassLua = `local GamePassData = {}

GamePassData.GamePasses = {
${Object.entries(config.gamepasses).map(([name, id]) => `\t["${name}"] = ${id}`).join(',\n')}
}

return GamePassData`;

      // Create downloadable files
      downloadFile('Configure.lua', luaConfig);
      downloadFile('ProductData.lua', productLua);
      downloadFile('GamePassData.lua', gamePassLua);
      
      alert('‚úÖ Configuration files exported! Check your downloads folder.');
    }

    function downloadFile(filename, content) {
      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function importConfig() {
      alert('Import feature: Paste your existing Lua config and it will be parsed automatically. (Feature coming soon)');
    }

    // Tutorial functions
    function showTutorial() {
      document.getElementById('tutorial-modal').style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeTutorial() {
      document.getElementById('tutorial-modal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Close tutorial on background click
    document.getElementById('tutorial-modal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeTutorial();
      }
    });
  </script>

</body>
</html>
